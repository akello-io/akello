
name: Registry
states:
  - state: referred
    transitions:
      - trigger: accept
        dest: treatment
        conditions:
          - condition: has_consented
          - condition: has_measurement_value
            masure: PHQ9
            value:
              - operator: ge
                value: 10
          - condition: has_measurement_value
            masure: GAD7
            value:
              - operator: ge
                value: 10
      - trigger: discharge
        dest: discharged
  - state: treatment
    transitions:
      - trigger: graduate
        dest: relapse_prevention_program
      - trigger: discharge
        dest: discharged
      - trigger: discharge
        dest: Discharged
  - state: relapse_prevention_program
  - state: discharged


